## Feito para rodar no PicSimLab com o PIC 16F877A na Boad: PicGenios





\*O que o Código Faz (A Lógica): Este programa simula um cruzamento com semáforo para carros e pedestres.



1. Estado Padrão: O programa inicia (e permanece a maior parte do tempo) no estado\_padrao().



* Sinal Verde para os Carros.
* Sinal Vermelho para os Pedestres.
* O display de 7 segmentos fica desligado.



2\. Pedestre Aperta o Botão: O programa fica constantemente checando se o botão em PIN\_B0 foi pressionado.



* A função botao\_pressionado() é usada para isso. Ela é muito robusta, pois inclui um "debounce" (ignora ruídos elétricos) e espera o usuário soltar o botão (para não ativar o ciclo várias vezes).



3\. Lógica de Espera (Regra dos 20 Segundos):



* Quando o botão é pressionado, o código verifica quanto tempo se passou desde a última vez que o sinal fechou para os carros.
* Ele usa duas variáveis, tempo (tempo total de execução) e ultimo (quando o botão foi pressionado pela última vez), para calcular isso.
* Se menos de 20 segundos se passaram, o programa trava e fica esperando (while (wait)) até completar os 20 segundos, mantendo o sinal verde para os carros.
* Se 20 segundos ou mais já se passaram, ele segue imediatamente para o próximo passo.



4\. Sequência de Travessia:



* O sinal do carro fica Amarelo por 3 segundos.
* O sinal do carro fica Vermelho por 2 segundos (um tempo de segurança antes do pedestre poder atravessar).
* O sinal do pedestre fica Verde e o display acende.
* Inicia uma contagem regressiva de "15" até "06". Cada número fica visível por 1 segundo (Total: 10 segundos).
* Ao chegar no "05", a contagem continua de "05" até "00" (Total: 6 segundos), mas agora piscando (o display acende por 0.5s e apaga por 0.5s a cada segundo).
* Assim que a contagem chega a zero, o sinal do pedestre volta a ficar Vermelho imediatamente.
* Após 1 segundo de segurança (ambos os sinais vermelhos), o sinal do carro volta a ficar Verde.



5\. Retorno ao Padrão: O programa volta ao Estado Padrão (passo 1) e fica aguardando um novo chamado do botão.

